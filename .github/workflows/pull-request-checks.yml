name: Pull Request Validation
on:
  pull_request:
    types:
     - opened
     - reopened
     - labeled
     - unlabeled

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true


jobs:  
  check-labels:
    runs-on: ubuntu-latest
    steps:
      # https://github.com/GitHubSecurityLab/actions-permissions/tree/main/monitor
      - uses: GitHubSecurityLab/actions-permissions/monitor@v1
        with:
          config: ${{ vars.PERMISSIONS_CONFIG }}

      - name: Check semver label
        id: semver_label_check
        uses: agilepathway/label-checker@v1.5.9
        if: ${{!contains(github.event.pull_request.labels.*.name, 'documentation') && !contains(github.event.pull_request.labels.*.name, 'maintenance')}}
        with:
          prefix_mode: true
          one_of: "semver:"
          repo_token: ${{ secrets.GITHUB_TOKEN }}
